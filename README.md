# Devin ハンズオン勉強会

## 開催概要

- 実施月：2025/06

## 勉強会のゴール

- 今後 Devin などの自律エージェントを使うための足がかりとなります。
- Devin を実際に動かす体験をしてもらいます。
- 実践的な Tips を持ち帰ってもらいます。

## Devin 概要

### 位置づけ

- Devin：AI ソフトウェアエンジニア。クラウド上にもう一人のエンジニアを雇う感覚のツールです。
- 汎用 LLM（ChatGPT）／IDE 内 AI（Copilot）との違い
  - ChatGPT：さまざまな質問に答える大規模言語モデルです。
  - Copilot：IDE 内でコード補完をしてくれるアシスタントです。
- Devin：自律エージェント＋実行環境
  - Shell・コードエディタ・Web ブラウザを備えたクラウド VM 上で作業します。
  - タスクの計画からコマンド実行、テスト、PR 作成まで一貫して完了できる"自律エージェント＋実行環境"である点が特徴です。

### 長所

- 長時間コンテキスト保持：各セッションは VM スナップショットから開始され、依存ライブラリや複数リポジトリを含めた前回の作業状態をそのまま復元できるため、途中で中断しても再開が容易です。
- Shell／ブラウザ／エディタを介した実行・検証ループ：Shell で npm test や pytest を実行し、失敗した場合は自分で原因を追跡して修正します。ブラウザで Storybook や Web アプリを起動し、画面キャプチャを取得しながら UI バグを確認できます。
- CI/CD・リポジトリ連携：GitHub アプリと連携することで、Pull Request の作成・コメント応答・GitHub Actions のログ確認まで自動化できます。

### 制約

- 実行環境待ち時間：セッションごとに新規の VM が必要となり、起動までの待機時間が発生します。
- プロンプト品質とタスク粒度がコストに直結：作業量は Agent Compute Unit（ACU）で課金され、タスクの複雑度・コード規模・会話の往復回数などによって消費量が増減します。
- 機密情報の取り扱い：機密情報は Secrets Manager 経由で渡すことが推奨されており、社内規定に沿ったアクセス権限管理が求められます。

### 料金

- Core プラン：最低チャージ $20（Pay-as-you-go：$2.25／ACU）、ACU 同梱なし、10 同時セッション、月額縛りなし
- Team プラン：$500／月（250 ACU 含む、追加分は $2.00／ACU）、API 利用可能、無制限セッション、Slack・GitHub 連携強化
- ACU とは？：VM 時間・モデル推論・ネットワーク帯域など Devin がタスクを完了するために消費したリソースの正規化指標

## 環境構築

Devin のアカウントを作成します。

リポジトリを取得します。

```bash
git clone https://github.com/kiyodori/devin-hands-on.git
cd devin-hands-on
```

自分の GitHub リポジトリに取得したリポジトリのコードをアップします。

Devin で新セッションにリポジトリを指定します。

1. Devin にアクセス。「Settings」→「Devin's Settings」→「Devin's Machine」に進みます。
2. リポジトリを追加。「+Repository」ボタンをクリックし、追加したいリポジトリを選択し、「Continue with [REPO_NAME]」をクリックします。
3. リポジトリをセットアップ。Devinの仮想マシン上にリポジトリがクローンされ、依存関係のインストールやテスト設定などのセットアップが必要です。「Start setup」ボタンを押し、セットアップを進め、すべてのセットアップ項目が完了したら「Finish」を押して完了します。
4. 新セッション開始時にリポジトリを指定。「+ new session」をクリックし、「Hey @Devin, please verify that you can:access the [リポジトリ名] repo」と指示すると、リポジトリが指定されます。自然言語で「[リポジトリ名]に接続してください」と指示することも可能です。

## ハンズオンで使ってみよう

以下のプロジェクトに順に取り組んでみましょう。

- [case1](./case1/README.md)
- [case2](./case1/README.md)
- [case3](./case1/README.md)

## Devin のユースケース

以下のようなタスクは Devin は得意です。

- 変更行数が100～200行前後のゴールが明確なタスク
- ライブラリのアップデート調査
- 単体テストの実装
- バグの修正
- 機能の廃止
- ドキュメント化

## 実践的に使う Tips 集

### Slack 連携を活用する

- Slack 連携を活用すると、Slack 上で Devin に指示を出すことができます
- 移動時にも指示を出せるので便利です

### タスクは細分化

- Devin に任せるタスクの基準は「ジュニアエンジニアやインターンが、十分な文脈や指示があれば自力で解決できるレベル」です
- Devin に依頼するタスクの粒度のイメージは 1 コミット/1 PR レベルで、30 分で終わる小タスクになります
- 例えば「この関数をリファクタ」「この PR のこのバグを修正」「このファイルの型定義を修正し PR を作成」「README を最新化」「Lint エラーを解消」などです

### 検証可能な単位でゴールを設定する

- 理想的には、テストがパスしたり、CI が成功するか確認するなど、検証可能なゴールを設定します
- テストや CI などのフィードバックループを回すことで、Devin は間違いを効果的に修正できるようになります
- 例えば「テストを追加しパスさせる」「CI が通るように修正」などです

### 最初に丁寧に依頼、作業手順を確認する

- 指示の粒度や詳細さは「人間の同僚に説明する時と同じレベル」で明確にしましょう
- Devin に大きな判断を委ねず、設計方針・実装例・参考ファイル・成功基準等を丁寧に、具体的に伝えるとタスクの成功率が上がります
- 指示を曖昧にしてはいけません
- 最初に「作業を小さなサブタスクに分け、それぞれの内容・手順・テスト方法を説明し、私が「OK」と答えるまで着手しないでください」などと依頼して、作業手順を確認するとミスや出戻りが減ります
- 公式ドキュメントの例を以下に引用します

```
Devinリポジトリで、Devinが実行されるリモートマシンのRAMとCPUの使用率を監視するツールを構築してください。そのためには、以下のタスクを実行してください。

- devin.rs の起動時に自動的に起動するバックグラウンド タスクを作成します。
- タスクは、この Devin セッションで使用されるすべてのフォークされたリモート マシンへの接続を開き、それらの RAM と CPU の使用状況を監視する必要があります。
0 使用可能なリソースの使用量が 80% を超える場合は、これを通知する新しいタイプの Devin イベントを発行します (Kafka の使用方法を確認してください)。
- 他の操作を妨げないスマートな設計を心がけてください。Devinサブエージェントのすべてのコンテナがどのように相互作用するかを理解する必要があります。
```

### チェックポイントを設ける

- 複雑なタスクは検証可能なサブタスクに分割し、サブタスクごとに 1 つの Devin セッションを開始します
- 各サブタスクの成功を定義し、必要に応じて各サブタスク内にチェックポイントを設定します
- 各チェックポイントまたはサブタスクを完了した後、Devin に報告してもらいます
- 例えば「API を変更するときは、エンドポイントがステータス 200 を返し、すべての必須フィールドが含まれていることを確認します。」「データセットを操作するときは、少なくとも 500 行あり、列 X、Y、Z が含まれていることを確認してください。」などです

### UI／見た目の最終調整は人間が担当

- UI の変更はコードだけでなく表示されている画面を人間が目視する必要があるため、Devin に任せるのは難しいです
- 見た目の調整は人間が担当するのが良いです

### 必要に応じてタスクを引き継ぐ

- 状況によっては、タスクの最後の 20% を人間が引き継いだほうが早く完了することがあります
- 複雑なプロジェクト全体を Devinだけに頼ると、うまくこなせず遅延が発生することがあります
- その場合、実装のベースは Devin に任せ、その後改良を加えると良いです

### 情報がオープンなものほど得意

- Devin は情報がオープンで充分にあるものほど得意です。簡単なタスクは当然、高度なアルゴリズム実装などの複雑なタスクも成果を出します
- 一方で、情報がクローズドで、組織固有の文脈を含むタスクは現状苦手です。適切なコンテキストを共有するほど効果を発揮できるようになります

### Knowledge／Playbook を整備する

- Knowledge／Playbook を整備するほど、Devin の成果が出るようになります

#### Knowledge

- Devin に「社内 Wiki」のような形で前提知識を覚えさせる永続的なドキュメント置き場です。コード規約・社内固有ツールの使い方・主要ワークフロー（テスト実行・デプロイ）などの前提知識をアップロードすると、今後のすべてのセッションで Devin が自動参照します
- Devin が「この Knowledge が必要だ」と判断するための Trigger に対して、本文として実際のガイドラインやコマンド例など数行〜数十行のテキストを記載すると、関連すると判断した Knowledge を自動的に読み込みます
- 活用することで①毎回プロンプトに長い説明を書かなくても済み、オンボーディングコストが大幅に低減します②Devin の判断材料が増えるため、コード品質や設計提案の精度が上がります③反復作業で出やすい“社内ルール逸脱”のミスが減ります
- Settings & Library → Knowledge → “New Knowledge” をクリックすることで設定できます
- ブランチ命名規則の例

```text
Title: ブランチ命名規則

Trigger: Git リポジトリで新しいブランチを作成する際、またはチーム内でブランチの命名規則を確認する際

Content:

- ブランチの目的を明確に示すために、明確で説明的なプレフィックスを使用してください（例：feature、fix、release、docs、refactor）。
- 単語はハイフンで区切り、アンダーバーやスペースは使用しないでください。
- 名前は簡潔ながら情報豊富に保ってください。
- チーム全体とリポジトリ間で一貫性を維持してください。
```

- デプロイ手順の例

```text
Title: デプロイ手順

Trigger: ステージング環境へデプロイされた際

Content:

1. `make docker-build && make push` を実行します
2. `scripts/deploy_staging.sh` を実行します
3. https://stg.example.com/health でヘルスチェックを確認します
```

#### Playbook

- 特定タスクを自動化する再利用プロンプト集です。「何をどうやるか」の手順をまとめます
-
- 活用することで①何度も繰り返す開発タスク（テスト追加、ライブラリ移行など）を 1 ファイルにまとめて Devin に渡すと、次回からはその Playbook だけで自律的に作業が完遂します②組織やコミュニティで共有できるため、誰かが一度成功させたワークフローを コピペで再現できます
- Settings & Library → Playbooks → “Create playbook” をクリックすることで設定できます
- Python ライブラリを PyPI に公開する例

```text
Title: Python ライブラリを PyPI に公開する

Content:

Playbook: Python ライブラリを PyPI に公開する

## 概要

このプレイブックは、Python コードをオープンソースのライブラリとして PyPI (https://pypi.org/) に公開するために使用できます

## ユーザーが用意する必要があるもの

1. Python コードの GitHub リポジトリの URL を提供してください
2. PyPI アカウントの API キーを提供してください

## 手順

1. 依存関係をセットアップする
   - `sudo apt install twine -y` を実行して `twine` をインストールします
2. ユーザーが提供した GitHub リポジトリをクローンする
   - コマンド `git clone <repository_link>` を実行する
   - クローンしたリポジトリのディレクトリに移動する
3. Python コードを設定する
   - Python コードが正常に動作するかテストする
   - 配布用に Python コードをパッケージ化する `setup.py` ファイルを作成する（既に存在しない場合）
   - コマンド `python3 setup.py bdist_wheel` を実行して `dist` ファイルを作成します
4. PyPI にアップロードする
    - PyPI API キーを環境変数として設定します
    - `twine upload dist/*` コマンドを使用して、パッケージ化されたコードを PyPI にアップロードします
    - PyPI ウェブサイトにアクセスし、ライブラリが正常に公開されたことを確認します
5. 「リポジトリが既に存在します」エラーを修正（発生した場合）（オプション）
   - ディレクトリに既に存在する場合、ユーザーに代替ディレクトリ名を促します
   - ステップ4を繰り返し実行します
6. 成果物をユーザーと共有する
   - ユーザーにPyPIのライブラリ名とインストール手順を共有してください
```

### Essential Guidelines を読む

- Devin のベストプラクティスを知るために、Essential Guidelines を読むと良いです
- [When to Use Devin](https://docs.devin.ai/essential-guidelines/when-to-use-devin)
- [Instructing Devin Effectively](https://docs.devin.ai/essential-guidelines/instructing-devin-effectively)
- [Good vs. Bad Instructions](https://docs.devin.ai/essential-guidelines/good-vs-bad-instructions)
