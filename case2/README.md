# Case 2

Devin を使い、テスト駆動で開発・修正を行いましょう。

ここではテストの作成からバグの修正、CI (プログラムのテストやチェックを自動で行う仕組み) の追加までを行います。

## 手順

### テストファイルを作成する

プロンプトを入力します。

```
case2/src/utils/math.js 内の average 関数に対して Jest ユニットテストを作成してください。average 関数は与えられた配列の数値の平均値を計算するもので、本来期待される挙動に対してテストを作成してください。空の配列、単一の値、複数の値、および負の数をカバーするようにしてください。テストファイルは tests/math.test.js に配置してください。ただし、utils/math.js のコードは変更しないでください。
```

### テストを実行し、バグを特定する

プロンプトを入力します。

```
テストを実行してください。失敗した場合、失敗の原因を要約し、バグの発生箇所を特定してください。
```

### バグを修正する

プロンプトを入力します。

```
見つけたバグを修正してください。すべてのテストが通過することを確認してください。
```

### CI を追加する

プロンプトを入力します。

```
GitHub Actions ワークフローを .github/workflows/ci.yml に追加し、プッシュとプルリクエスト時に npm ci && npm test を実行するように設定します。
```

## ポイント

- 進捗確認するには「差分だけ表示してください。」と依頼するとわかりやすいです
- 失敗するテストを先に書かせることで、TDD のフィードバックループに基づいて開発を進めることができます
- 「バグ診断 → 修正提案 → コード変更 → テスト再実行」まで一貫して Devin に頼むことができます
- CI まで作ることで、チャットで指示するだけでプログラムの開発や確認を進めやすくなります
